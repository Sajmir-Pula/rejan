<!DOCTYPE html>
<html lang="sq">
<head>
  <meta charset="UTF-8">
  <title>Dostoevsky - Vepra</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Using Cinzel Decorative for hero title and Philosopher for body -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Philosopher:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-accent: #A67C52;
      --secondary-accent: #6B4F3B;
      --text-primary: #F2F2F2;
      --text-secondary: #B3B3B3;
      --bg-gradient: linear-gradient(45deg, #1E1E1E, #2C2C2C 50%, #1E1E1E 100%);
      --overlay-color: rgba(30,30,30,0.65);
      --container-bg: rgba(25,25,35,0.95);
      --border-color: rgba(166,124,82,0.3);
      --shadow-color: rgba(166,124,82,0.35);
    }
    /* Background Animation & Texture */
    body {
      background: var(--bg-gradient);
      background-size: 400% 400%;
      animation: cosmicFlow 25s ease infinite;
      margin: 0;
      font-family: 'Philosopher', sans-serif;
      color: var(--text-primary);
      position: relative;
      overflow-x: hidden;
    }
    @keyframes cosmicFlow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .texture-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background-image: 
        radial-gradient(circle at 20% 80%, rgba(166,124,82,0.1) 0%, transparent 30%),
        url("data:image/svg+xml,%3Csvg viewBox='0 0 1000 1000' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
      opacity: 0.15;
      z-index: 0;
    }
    /* Floating Shapes for Extra Motion */
    .shapes-container {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    .floating-shape {
      position: absolute;
      width: 100px;
      height: 100px;
      background: var(--primary-accent);
      opacity: 0.05;
      border-radius: 50%;
      animation: float 5s ease-in-out infinite alternate, rotate 10s linear infinite;
    }
    @keyframes float {
      0% { transform: translateY(0); }
      100% { transform: translateY(-20px); }
    }
    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .floating-shape:nth-child(1) { top: 10%; left: 15%; }
    .floating-shape:nth-child(2) { top: 30%; left: 70%; width: 150px; height: 150px; }
    .floating-shape:nth-child(3) { top: 60%; left: 40%; width: 120px; height: 120px; }
    .floating-shape:nth-child(4) { top: 80%; left: 80%; width: 80px; height: 80px; }
    
    /* Header */
    header {
      position: fixed;
      top: 0; left: 0; right: 0;
      background: rgba(25,25,35,0.95);
      backdrop-filter: blur(8px);
      padding: 0.6rem 2%;
      z-index: 1000;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
      animation: fadeInUp 1s ease forwards;
    }
    header .logo {
      font-family: 'Cinzel Decorative', serif;
      font-size: 1.4em;
      color: var(--primary-accent);
    }
    nav {
      display: flex;
      gap: 1rem;
    }
    nav a {
      color: var(--text-primary);
      padding: 0.4rem 0.8rem;
      border-radius: 20px;
      background: rgba(166,124,82,0.3);
      text-decoration: none;
      font-weight: 600;
      transition: background 0.3s ease, transform 0.3s ease;
    }
    nav a:hover {
      background: linear-gradient(145deg, rgba(166,124,82,0.5), rgba(30,52,96,0.5));
      transform: translateY(-2px);
    }
    /* Hero Banner */
    .hero-banner {
      position: relative;
      height: 50vh;
      min-height: 300px;
      margin-top: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      overflow: hidden;
      border-bottom: 2px solid var(--primary-accent);
      animation: fadeInUp 1s ease forwards;
    }
    .hero-banner::before {
      content: "";
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: var(--overlay-color);
      z-index: 1;
      animation: pulse 3s infinite;
    }
    @keyframes pulse {
      0% { opacity: 0.65; }
      50% { opacity: 0.75; }
      100% { opacity: 0.65; }
    }
    .hero-banner h1 {
      position: relative;
      z-index: 2;
      font-family: 'Cinzel Decorative', serif;
      font-size: 10em;
      background: linear-gradient(135deg, var(--primary-accent), var(--secondary-accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 4px 6px rgba(0,0,0,0.3);
      animation: spark 1s ease-out forwards;
    }
    @keyframes spark {
      0% { opacity: 0; transform: scale(0.95) translateY(10px); }
      100% { opacity: 1; transform: scale(1) translateY(0); }
    }
    /* Main Content */
    .main-container {
      max-width: 1200px;
      margin: 40px auto;
      padding: 40px;
      background: var(--container-bg);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      border: 1px solid var(--border-color);
      box-shadow: 0 0 50px rgba(0,0,0,0.3);
      position: relative;
      z-index: 1;
      animation: fadeInUp 1s ease forwards;
    }
    /* Grid for Book Cards */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
      margin-top: 40px;
    }
    .book-card {
      background: rgba(40,40,50,0.85);
      padding: 20px;
      border-radius: 15px;
      border: 1px solid var(--border-color);
      overflow: hidden;
      transform: translateY(20px) scale(0.95);
      opacity: 0;
      animation: cardFadeIn 0.8s ease forwards;
    }
    @keyframes cardFadeIn {
      from { opacity: 0; transform: translateY(20px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    .book-card:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 15px 35px var(--shadow-color);
    }
    .book-image {
      width: 100%;
      height: 300px;
      object-fit: cover;
      border-radius: 10px;
      transition: transform 0.3s ease;
      border: 2px solid rgba(166,124,82,0.2);
    }
    .book-card:hover .book-image {
      transform: scale(1.05);
      filter: saturate(1.1) contrast(1.05);
    }
    .book-card h3 {
      color: var(--primary-accent);
      font-size: 1.2em;
      margin: 15px 0 10px;
    }
    .book-card p {
      color: var(--text-secondary);
      line-height: 1.6;
      font-size: 0.9em;
    }
    /* Chatbot Styles */
    #chatbot-container {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 1000;
    }
    /* Chatbot Button now just pulses */
    #chatbot-toggle {
      background: linear-gradient(145deg, var(--primary-accent), var(--secondary-accent));
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(166,124,82,0.4);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      font-size: 1.1em;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    #chatbot-toggle:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 25px rgba(166,124,82,0.4);
    }
    #chatbot-window {
      position: fixed;
      bottom: 90px;
      right: 30px;
      width: 350px;
      height: 500px;
      background: var(--container-bg);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.15);
      display: none;
      flex-direction: column;
      border: 1px solid rgba(166,124,82,0.4);
    }
    #chatbot-messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .message {
      max-width: 85%;
      padding: 12px 18px;
      border-radius: 15px;
      animation: messageAppear 0.3s ease;
      word-wrap: break-word;
      white-space: pre-wrap;
      overflow-wrap: break-word;
    }
    .user-message {
      background: var(--primary-accent);
      color: white;
      align-self: flex-end;
    }
    .bot-message {
      background: rgba(40,45,55,0.9);
      color: var(--text-primary);
      align-self: flex-start;
    }
    #chatbot-input-container {
      display: flex;
      gap: 10px;
      padding: 15px;
      background: var(--container-bg);
      border-top: 1px solid rgba(166,124,82,0.3);
    }
    #chatbot-input {
      flex-grow: 1;
      padding: 12px;
      border: 1px solid rgba(166,124,82,0.4);
      border-radius: 25px;
      background: var(--container-bg);
      color: var(--text-primary);
      transition: border 0.3s ease, box-shadow 0.3s ease;
    }
    #chatbot-input:focus {
      outline: none;
      border-color: var(--primary-accent);
      box-shadow: 0 0 10px rgba(166,124,82,0.3);
    }
    #send-btn {
      background: linear-gradient(145deg, var(--primary-accent), var(--secondary-accent));
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 25px;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.3s ease;
    }
    #send-btn:hover {
      background: linear-gradient(145deg, var(--secondary-accent), var(--primary-accent));
      transform: translateY(-2px);
    }
    @keyframes messageAppear {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
    ::-webkit-scrollbar-thumb { background: var(--primary-accent); border-radius: 4px; }
  </style>
</head>
<body>
  <div class="texture-overlay"></div>
  
  <!-- Floating Accent Shapes -->
  <div class="shapes-container">
    <div class="floating-shape"></div>
    <div class="floating-shape"></div>
    <div class="floating-shape"></div>
    <div class="floating-shape"></div>
  </div>
  
  <!-- Header -->
  <header>
    <div class="logo"><i class="fa-solid fa-book-open"></i> Dostoevsky</div>
    <nav>
      <a href="index.html">Kryefaqja</a>
      <a href="biografia.html">Biografia</a>
      <a href="filozofia.html">Filozofia</a>
      <a href="citimet.html">Citimet</a>
    </nav>
  </header>
  
  <!-- Hero Banner -->
  <section class="hero-banner" aria-label="Hero Banner - Vepra">
    <h1>VEPRAT KRYESORE</h1>
  </section>
  
  <!-- Main Content -->
  <div class="main-container">
    <div class="grid">
      <div class="book-card">
        <img src="https://images.thenile.io/r1000/9780099981909.jpg" class="book-image" alt="Krimi dhe Ndëshkimi">
        <h3>Krimi dhe Ndëshkimi (1866)</h3>
        <p>Psikologjia e thellë e Raskolnikovit në një sfond moral të errët</p>
      </div>
      <div class="book-card">
        <img src="https://d28hgpri8am2if.cloudfront.net/book_images/onix/cvr9781625583826/brothers-karamazov-9781625583826_hr.jpg" class="book-image" alt="Vëllezërit Karamazov">
        <h3>Vëllezërit Karamazov (1880)</h3>
        <p>Konflikti familjar në sfondin e filozofisë ekzistenciale</p>
      </div>
      <div class="book-card">
        <img src="https://www.theindianbookstore.in/cdn/shop/files/WhatsAppImage2023-09-11at2.58.22PM.jpg?v=1694527064&width=300" class="book-image" alt="Idioti">
        <h3>Idioti (1869)</h3>
        <p>Drama e princit Mishkin në një shoqëri korrupt</p>
      </div>
    </div>
  </div>
  
  <!-- Chatbot Container with Pulsing Button -->
  <div id="chatbot-container">
    <button id="chatbot-toggle">💬 Pyet Rejan</button>
    <div id="chatbot-window">
      <div id="chatbot-messages"></div>
      <div id="chatbot-input-container">
        <input type="text" id="chatbot-input" placeholder="Shkruani pyetjen..." />
        <button id="send-btn">Dërgo</button>
      </div>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const chatbotToggle = document.getElementById('chatbot-toggle');
      const chatbotWindow = document.getElementById('chatbot-window');
      const chatMessages = document.getElementById('chatbot-messages');
      const chatInput = document.getElementById('chatbot-input');
      const sendBtn = document.getElementById('send-btn');
      
      chatbotToggle.addEventListener('click', () => {
        const isVisible = chatbotWindow.style.display === 'flex';
        chatbotWindow.style.display = isVisible ? 'none' : 'flex';
        if (!isVisible) chatInput.focus();
      });
      
      function addMessage(text, isUser) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
        messageDiv.textContent = text;
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }
      
      async function handleSend() {
        const question = chatInput.value.trim();
        if (!question) return;
        addMessage(question, true);
        chatInput.value = '';
        chatInput.disabled = true;
        sendBtn.disabled = true;
        try {
          const response = await fetch("http://localhost:5000/ask-dostoevsky", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message: question }),
          });
          const data = await response.json();
          addMessage(data.reply || "Nuk mundem të jap një përgjigje në këtë çast.", false);
        } catch (error) {
          addMessage("Gabim në lidhje me serverin. Ju lutem provoni përsëri.", false);
        } finally {
          chatInput.disabled = false;
          sendBtn.disabled = false;
          chatInput.focus();
        }
      }
      
      sendBtn.addEventListener('click', handleSend);
      chatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') handleSend();
      });
      
      setTimeout(() => {
        addMessage("Përshëndetje! Unë jam REJAN asistenti virtual për Fjodor Dostoevskin. Çfarë dëshironi të dini?", false);
      }, 1000);
      
      document.querySelectorAll('.book-image').forEach(img => {
        img.addEventListener('mousemove', (e) => {
          const rect = img.getBoundingClientRect();
          const x = (e.clientX - rect.left) / rect.width * 100;
          const y = (e.clientY - rect.top) / rect.height * 100;
          img.style.transform = `
            perspective(1000px)
            rotateX(${(y - 50) / 4}deg)
            rotateY(${(50 - x) / 4}deg)
            scale(1.05)
          `;
        });
        img.addEventListener('mouseleave', (e) => {
          e.target.style.transform = 'scale(1)';
        });
      });
    });
  </script>
</body>
</html>
